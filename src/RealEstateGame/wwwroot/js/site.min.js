function ajax(t,a){var e=(new Date).getTime();console.log("ajax"),window.history.pushState("RealEstateGame","RealEstateGame",t);var n="";t.includes("#")&&(n=t.substring(t.indexOf("#")),t=t.substring(0,t.indexOf("#"))),t+=t.includes("?")?"&ajax=true":"?ajax=true",$.ajax({type:"GET",url:t,success:function(t){var o=(new Date).getTime();console.log(o-e),ajaxReturn(a,t,n)}})}function ajaxPost(t,a){var e=$(t).attr("action");console.log("ajaxpost"),$.ajax({type:"POST",url:e,data:$(t).serialize(),success:function(t){ajaxReturn(a,t,"no")}})}function ajaxReturn(t,a,e){console.log("post success"),"<"==a.trim().substr(0,1)?(updateTarget(t,a,!0),"#viewplayer"!==t&&updatePlayer(),e.length>1&&"no"!=e?(console.log("scroll"),$(window).scrollTop($(e).offset().top-100)):"no"!==e&&$(window).scrollTop(0)):message(a)}function updatePlayer(){console.log("Update Player"),$.ajax({type:"GET",url:"/Home/GetPlayer?ajax=true",success:function(t){console.log("Update Player Success"),updateTarget("#viewplayer",t,!1)}})}function updateTarget(t,a,e){$(t).fadeOut(100,function(){$(t).html(a),$(t).fadeIn(150,function(){e&&ajaxInit()})})}function message(t){console.log("message '"+t+"'");var a=$(".message");a.text(t),a.fadeIn(),window.setTimeout(function(){a.fadeOut()},1500)}function ajaxInit(){console.log("ajax init"),$("a.ajax").click(function(t){return $(this).removeClass("ajax"),ajax($(this).attr("href"),$(this).attr("data-target")),t.preventDefault(),t.stopImmediatePropagation(),!1}),$("button.ajax").parent().submit(function(t){t.preventDefault();var a=$(this).find("button.ajax");a.removeClass("ajax");var e=$("<input>").attr("name","ajax").attr("type","hidden").val("true");return $(this).append(e),console.log(this),ajaxPost(this,a.attr("data-target")),!1});var t=0;$("input[type=range]").each(function(){$(this).on("mousemove",function(){var t=Number($(this).val()),a="$"+parseFloat(t,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"),e="output"+$(this).attr("id");$("#"+e).html(a)}).on("change",function(){var a=Number($(this).val()),e=Number($("#money").text());t=setSliderTotal(this),a>e-t&&(a=e-t,$(this).val(e-t));var n="$"+parseFloat(a,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"),o="output"+$(this).attr("id");$("#"+o).html(n)})})}function setSliderTotal(t){var a=0;return $("input[type=range]").each(function(){this!=t&&(a+=Number($(this).val()))}),a}function log(t){console.log(t,(new Date).getTime())}$(document).ready(function(){ajaxInit();var t=$(window),a=$("#viewplayer");t.scroll(function(){t.width()>992&&a.css("margin-top",window.pageYOffset)})});